const _0x3229ba=_0x119d;(function(_0x1f0fe2,_0x20e1e3){const _0x267a09=_0x119d,_0xd9d895=_0x1f0fe2();while(!![]){try{const _0x2ee235=parseInt(_0x267a09(0x1cf))/0x1+-parseInt(_0x267a09(0x1d3))/0x2+parseInt(_0x267a09(0x1d1))/0x3*(-parseInt(_0x267a09(0x1d8))/0x4)+parseInt(_0x267a09(0x1c8))/0x5+-parseInt(_0x267a09(0x1e0))/0x6+parseInt(_0x267a09(0x1d9))/0x7+-parseInt(_0x267a09(0x1e8))/0x8;if(_0x2ee235===_0x20e1e3)break;else _0xd9d895['push'](_0xd9d895['shift']());}catch(_0x170321){_0xd9d895['push'](_0xd9d895['shift']());}}}(_0x2bf3,0x60fcb));import _0x31624f from'mongoose';function _0x119d(_0x2f81c2,_0x5127df){const _0x2bf341=_0x2bf3();return _0x119d=function(_0x119d66,_0x55b421){_0x119d66=_0x119d66-0x1c5;let _0x3ae3d5=_0x2bf341[_0x119d66];return _0x3ae3d5;},_0x119d(_0x2f81c2,_0x5127df);}function _0x2bf3(){const _0x45e1fc=['3023635zwdrfC','map','findIndex','_model','data','options','entries','750278ePIpFu','push','69FoKVLz','insertMany','348828AxQYae','conn','write','findById','models','79404RyQqUV','2834426EpRkOi','_data','fromEntries','error','save','lists','_schema','470574PpINnP','create','catch','list','filter','findOne','_id','keys','5225984GTHbio','all','name','url'];_0x2bf3=function(){return _0x45e1fc;};return _0x2bf3();}const {Schema,connect,model:_model}=_0x31624f,defaultOptions={'useNewUrlParser':!![],'useUnifiedTopology':!![]};export class mongoDB{constructor(_0x32dc4f,_0x35ef0f=defaultOptions){const _0x52f320=_0x119d;this[_0x52f320(0x1c7)]=_0x32dc4f,this[_0x52f320(0x1cd)]=_0x35ef0f,this['data']=this['_data']={},this[_0x52f320(0x1df)]={},this[_0x52f320(0x1cb)]={},this['db']=connect(this['url'],{...this['options']})[_0x52f320(0x1e2)](console[_0x52f320(0x1dc)]);}async['read'](){const _0x13e5c6=_0x119d;this[_0x13e5c6(0x1d4)]=await this['db'];let _0x1fdfe9=this[_0x13e5c6(0x1df)]=new Schema({'data':{'type':Object,'required':!![],'default':{}}});try{this[_0x13e5c6(0x1cb)]=_model(_0x13e5c6(0x1cc),_0x1fdfe9);}catch{this['_model']=_model(_0x13e5c6(0x1cc));}this[_0x13e5c6(0x1da)]=await this[_0x13e5c6(0x1cb)][_0x13e5c6(0x1e5)]({});if(!this[_0x13e5c6(0x1da)]){this[_0x13e5c6(0x1cc)]={};const [_0x4495d8,_0x30f7bc]=await Promise[_0x13e5c6(0x1c5)]([this[_0x13e5c6(0x1d5)](this[_0x13e5c6(0x1cc)]),this['_model'][_0x13e5c6(0x1e5)]({})]);this['_data']=_0x30f7bc;}else this['data']=this[_0x13e5c6(0x1da)]['data'];return this[_0x13e5c6(0x1cc)];}[_0x3229ba(0x1d5)](_0x5f1746){return new Promise(async(_0x2dcea6,_0x3f1dfa)=>{const _0xc063a0=_0x119d;if(!_0x5f1746)return _0x3f1dfa(_0x5f1746);if(!this['_data'])return _0x2dcea6(new this['_model']({'data':_0x5f1746})[_0xc063a0(0x1dd)]());this[_0xc063a0(0x1cb)]['findById'](this['_data'][_0xc063a0(0x1e6)],(_0x4da5f1,_0x550794)=>{const _0x5e05da=_0xc063a0;if(_0x4da5f1)return _0x3f1dfa(_0x4da5f1);if(!_0x550794[_0x5e05da(0x1cc)])_0x550794['data']={};return _0x550794[_0x5e05da(0x1cc)]=_0x5f1746,this[_0x5e05da(0x1cc)]={},_0x550794['save'](_0x2dcea6);});});}}export const mongoDBV2=class MongoDBV2{constructor(_0x5baed8,_0x1ef4f0=defaultOptions){const _0x3cefb3=_0x3229ba;this[_0x3cefb3(0x1c7)]=_0x5baed8,this[_0x3cefb3(0x1cd)]=_0x1ef4f0,this[_0x3cefb3(0x1d7)]=[],this[_0x3cefb3(0x1cc)]={},this['lists'],this[_0x3cefb3(0x1e3)],this['db']=connect(this['url'],{...this['options']})['catch'](console[_0x3cefb3(0x1dc)]);}async['read'](){const _0x552596=_0x3229ba;this['conn']=await this['db'];let _0x49efc7=new Schema({'data':[{'name':String}]});try{this[_0x552596(0x1e3)]=_model(_0x552596(0x1de),_0x49efc7);}catch(_0x376b7b){this[_0x552596(0x1e3)]=_model(_0x552596(0x1de));}this['lists']=await this[_0x552596(0x1e3)]['findOne']({});!lists?.[_0x552596(0x1cc)]&&(await this[_0x552596(0x1e3)][_0x552596(0x1e1)]({'data':[]}),this[_0x552596(0x1de)]=await this[_0x552596(0x1e3)][_0x552596(0x1e5)]({}));let _0x372ef4=[];for(let {name:_0x3947b5}of this['lists']['data']){let _0x60f58e;try{_0x60f58e=_model(_0x3947b5,new Schema({'data':Array}));}catch(_0xe95600){console[_0x552596(0x1dc)](_0xe95600);try{_0x60f58e=_model(_0x3947b5);}catch(_0x16f1b2){_0x372ef4[_0x552596(0x1d0)](_0x3947b5),console[_0x552596(0x1dc)](_0x16f1b2);}}if(_0x60f58e){this[_0x552596(0x1d7)][_0x552596(0x1d0)]({'name':_0x3947b5,'model':_0x60f58e});let _0x2054b8=await _0x60f58e['find']({});this[_0x552596(0x1cc)][_0x3947b5]=Object[_0x552596(0x1db)](_0x2054b8[_0x552596(0x1c9)](_0x1aa05d=>_0x1aa05d[_0x552596(0x1cc)]));}}try{let _0x50c79b=await this['list']['findById'](this['lists'][_0x552596(0x1e6)]);_0x50c79b[_0x552596(0x1cc)]=_0x50c79b[_0x552596(0x1cc)][_0x552596(0x1e4)](_0x70e6c7=>!_0x372ef4['includes'](_0x70e6c7[_0x552596(0x1c6)])),await _0x50c79b['save']();}catch(_0xfaefbe){console[_0x552596(0x1dc)](_0xfaefbe);}return this[_0x552596(0x1cc)];}['write'](_0x26c722){return new Promise(async(_0x584207,_0x5bf571)=>{const _0x2afa37=_0x119d;if(!this['lists']||!_0x26c722)return _0x5bf571(_0x26c722||this[_0x2afa37(0x1de)]);let _0x59790a=Object[_0x2afa37(0x1e7)](_0x26c722),_0x756f7c=[],_0x148722=0x0;for(let _0xf58537 of _0x59790a){if((_0x148722=this[_0x2afa37(0x1d7)]['findIndex'](_0x4f8a53=>_0x4f8a53[_0x2afa37(0x1c6)]===_0xf58537))!==-0x1){let _0x2e6602=this[_0x2afa37(0x1d7)][_0x148722]['model'];await _0x2e6602['deleteMany']()[_0x2afa37(0x1e2)](console[_0x2afa37(0x1dc)]),await _0x2e6602[_0x2afa37(0x1d2)](Object[_0x2afa37(0x1ce)](_0x26c722[_0xf58537])['map'](_0x215b80=>({'data':_0x215b80})));if(_0x2e6602&&_0xf58537)_0x756f7c['push']({'name':_0xf58537});}else{let _0x5637dd=new Schema({'data':Array}),_0x4f7c3a;try{_0x4f7c3a=_model(_0xf58537,_0x5637dd);}catch(_0x56074e){console[_0x2afa37(0x1dc)](_0x56074e),_0x4f7c3a=_model(_0xf58537);}_0x148722=this[_0x2afa37(0x1d7)][_0x2afa37(0x1ca)](_0x3382a4=>_0x3382a4[_0x2afa37(0x1c6)]===_0xf58537),this[_0x2afa37(0x1d7)][_0x148722===-0x1?this[_0x2afa37(0x1d7)]['length']:_0x148722]={'name':_0xf58537,'model':_0x4f7c3a},await _0x4f7c3a[_0x2afa37(0x1d2)](Object['entries'](_0x26c722[_0xf58537])[_0x2afa37(0x1c9)](_0x72ee48=>({'data':_0x72ee48})));if(_0x4f7c3a&&_0xf58537)_0x756f7c[_0x2afa37(0x1d0)]({'name':_0xf58537});}}return this[_0x2afa37(0x1e3)][_0x2afa37(0x1d6)](this[_0x2afa37(0x1de)]['_id'],function(_0x4be4b7,_0x278b52){const _0x53054c=_0x2afa37;if(_0x4be4b7)return _0x5bf571(_0x4be4b7);return _0x278b52[_0x53054c(0x1cc)]=_0x756f7c,this[_0x53054c(0x1cc)]={},_0x278b52[_0x53054c(0x1dd)](_0x584207);}),_0x584207(!![]);});}};
