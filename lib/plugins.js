function _0x4a5f(_0x23ee6d,_0x4d37c1){const _0x209ccd=_0x209c();return _0x4a5f=function(_0x4a5fb7,_0x4cddba){_0x4a5fb7=_0x4a5fb7-0x138;let _0x3a2213=_0x209ccd[_0x4a5fb7];return _0x3a2213;},_0x4a5f(_0x23ee6d,_0x4d37c1);}const _0x5330a1=_0x4a5f;(function(_0x3a1fd7,_0x1bf25c){const _0x22856f=_0x4a5f,_0x29d8b5=_0x3a1fd7();while(!![]){try{const _0xccf0c2=-parseInt(_0x22856f(0x139))/0x1*(parseInt(_0x22856f(0x13c))/0x2)+parseInt(_0x22856f(0x14d))/0x3+-parseInt(_0x22856f(0x13e))/0x4*(-parseInt(_0x22856f(0x142))/0x5)+parseInt(_0x22856f(0x146))/0x6*(-parseInt(_0x22856f(0x14c))/0x7)+parseInt(_0x22856f(0x14a))/0x8+parseInt(_0x22856f(0x138))/0x9+-parseInt(_0x22856f(0x13d))/0xa;if(_0xccf0c2===_0x1bf25c)break;else _0x29d8b5['push'](_0x29d8b5['shift']());}catch(_0x4c4b52){_0x29d8b5['push'](_0x29d8b5['shift']());}}}(_0x209c,0x7c21a));import{readdirSync,existsSync,readFileSync,watch}from'fs';import{join,resolve}from'path';import{format}from'util';import _0x105c6c from'syntax-error';import _0x18929c from'./import.js';import _0x4bfa0a from'./helper.js';const __dirname=_0x4bfa0a[_0x5330a1(0x152)](import.meta),pluginFolder=_0x4bfa0a[_0x5330a1(0x152)](join(__dirname,_0x5330a1(0x147))),pluginFilter=_0x5272cc=>/\.(mc)?js$/[_0x5330a1(0x13a)](_0x5272cc);let watcher,plugins,pluginFolders=[];watcher=plugins={};function _0x209c(){const _0x3a0ede=['172398yKgleT','../plugins/index','error','filter','6623088CjQBnt','sort','217IvSkHU','2312493GZDUbi','entries','\x20updated\x20plugin\x20-\x20\x27','default','info','__dirname','close','all','syntax\x20error\x20while\x20loading\x20\x27','logger','map','6864840IBxREu','96222CrjLmB','test','warn','4AKPFeW','12111370fWDNWd','404qnHbEG','splice','indexOf','push','21845DeZQEA','__filename','module','new\x20plugin\x20-\x20\x27'];_0x209c=function(){return _0x3a0ede;};return _0x209c();}async function filesInit(_0x53d543=_0x53d543,_0x19042a=_0x19042a,_0xb53351){const _0x17b516=_0x5330a1,_0x27286a=resolve(_0x53d543);if(_0x27286a in watcher)return;pluginFolders[_0x17b516(0x141)](_0x27286a),await Promise[_0x17b516(0x154)](readdirSync(_0x27286a)[_0x17b516(0x149)](_0x19042a)[_0x17b516(0x157)](async _0x45c80c=>{const _0x24ed48=_0x17b516;try{let _0x110c6a=global[_0x24ed48(0x143)](join(_0x27286a,_0x45c80c));const _0x13690a=await import(_0x110c6a);if(_0x13690a)plugins[_0x45c80c]=_0x24ed48(0x150)in _0x13690a?_0x13690a['default']:_0x13690a;}catch(_0x4b3b33){_0xb53351?.[_0x24ed48(0x156)][_0x24ed48(0x148)](_0x4b3b33),delete plugins[_0x45c80c];}}));const _0x51bad7=watch(_0x27286a,reload['bind'](null,_0xb53351,_0x27286a,_0x19042a));return _0x51bad7['on']('close',()=>deletePluginFolder(_0x27286a,!![])),watcher[_0x27286a]=_0x51bad7,plugins;}function deletePluginFolder(_0x5a6bf3,_0x1a2b12=![]){const _0x24dd94=_0x5330a1,_0xd63865=resolve(_0x5a6bf3);if(!(_0xd63865 in watcher))return;if(!_0x1a2b12)watcher[_0xd63865][_0x24dd94(0x153)]();delete watcher[_0xd63865],pluginFolders[_0x24dd94(0x13f)](pluginFolders[_0x24dd94(0x140)](_0xd63865),0x1);}async function reload(_0x314f9d,_0x4f067f=_0x4f067f,_0x7e69a=_0x7e69a,_0x164ff6,_0x5b3ad4){const _0x2d0202=_0x5330a1;if(_0x7e69a(_0x5b3ad4)){let _0x19d9df=global[_0x2d0202(0x143)](join(_0x4f067f,_0x5b3ad4),!![]);if(_0x5b3ad4 in plugins){if(existsSync(_0x19d9df))_0x314f9d[_0x2d0202(0x156)][_0x2d0202(0x151)](_0x2d0202(0x14f)+_0x5b3ad4+'\x27');else return _0x314f9d?.[_0x2d0202(0x156)][_0x2d0202(0x13b)]('deleted\x20plugin\x20-\x20\x27'+_0x5b3ad4+'\x27'),delete plugins[_0x5b3ad4];}else _0x314f9d?.['logger'][_0x2d0202(0x151)](_0x2d0202(0x145)+_0x5b3ad4+'\x27');let _0x55b58d=_0x105c6c(readFileSync(_0x19d9df),_0x5b3ad4,{'sourceType':_0x2d0202(0x144),'allowAwaitOutsideFunction':!![]});if(_0x55b58d)_0x314f9d[_0x2d0202(0x156)][_0x2d0202(0x148)](_0x2d0202(0x155)+_0x5b3ad4+'\x27\x0a'+format(_0x55b58d));else try{const _0x10d7e2=await _0x18929c(global[_0x2d0202(0x143)](_0x19d9df))['catch'](console[_0x2d0202(0x148)]);if(_0x10d7e2)plugins[_0x5b3ad4]=_0x10d7e2;}catch(_0x1afa0f){_0x314f9d?.['logger'][_0x2d0202(0x148)]('error\x20require\x20plugin\x20\x27'+_0x5b3ad4+'\x0a'+format(_0x1afa0f)+'\x27');}finally{plugins=Object['fromEntries'](Object[_0x2d0202(0x14e)](plugins)[_0x2d0202(0x14b)](([_0x1ed193],[_0x4e3521])=>_0x1ed193['localeCompare'](_0x4e3521)));}}}export{pluginFolder,pluginFilter,plugins,watcher,pluginFolders,filesInit,deletePluginFolder,reload};
